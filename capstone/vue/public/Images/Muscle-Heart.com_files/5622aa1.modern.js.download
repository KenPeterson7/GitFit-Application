(window.webpackJsonp=window.webpackJsonp||[]).push([[375],{1397:function(e,n,t){"use strict";t.r(n);var r=t(1),o=(t(21),t(22),t(99)),d=t(120),l=t(15),m=t(23),v=t.n(m),c=t(335);function w(){return h.apply(this,arguments)}function h(){return(h=Object(r.a)((function*(){l.a.debug("Handling UserSignup UTM params"),yield new Promise((e=>setTimeout(e,1e3)));var e=window.$nuxt.$api;if(e){var n={};for(var t of c.a)sessionStorage.getItem(t)&&(n[t]=sessionStorage.getItem(t));if(0!==Object.keys(n).length)try{var{data:data}=yield e.get("/api/v3/users/me");yield e.patch("/api/v3/users/".concat(data.id,"/setup"),n)}catch(e){if(!e.response)throw e;if(404===e.response.status)return w()}}}))).apply(this,arguments)}d.a.$on(o.a.UserSignedIn,(e=>{var n,t,{user:r,method:m,enterprise:c,track_analytics:w=!0}=e;l.a.debug("Handling UserSignedIn",r);var h="user_".concat(r.attributes.sub);if(w&&d.a.$emit(o.a.AnalyticsGA4Event,{event:"login",userId:h,method:m}),null===(n=window.$nuxt)||void 0===n||null===(t=n.$rollbar)||void 0===t||t.configure({payload:{person:{id:h}}}),v.a.remove("unauthed_cart"),!c.is_whitelabel){var _=r.attributes.given_name||void 0;window.Intercom("boot",{name:_||void 0,app_id:"fuchdm6u",user_id:h,email:r.attributes.email,eid:c.id})}})),d.a.$on(o.a.UserRegistered,(e=>{var n,t,{user:r,method:m,enterprise:c}=e;l.a.debug("Handling UserRegistered",r);var w="user_".concat(r.attributes.sub);if(d.a.$emit(o.a.AnalyticsGA4Event,{event:"sign_up",userId:w,method:m}),null===(n=window.$nuxt)||void 0===n||null===(t=n.$rollbar)||void 0===t||t.configure({payload:{person:{id:w}}}),v.a.remove("unauthed_cart"),!c.is_whitelabel){var h=r.attributes.given_name||void 0;window.Intercom("boot",{app_id:"fuchdm6u",user_id:w,name:h,email:r.attributes.email,eid:c.id})}})),d.a.$on(o.a.UserUpdatedAttributes,(e=>{var{user:n,enterprise:t}=e;l.a.debug("Handling UserUpdatedAttributes",n),v.a.remove("unauthed_cart"),t.is_whitelabel||(n.given_name||n.family_name)&&window.Intercom("update",{name:n.given_name+" "+n.family_name})})),d.a.$on(o.a.UserSignedOut,(e=>{var n,t,{enterprise:r}=e;l.a.debug("Handling UserSignedOut"),null===(n=window.$nuxt)||void 0===n||null===(t=n.$rollbar)||void 0===t||t.configure({payload:{person:null}}),r.is_whitelabel||window.Intercom("shutdown")})),d.a.$on(o.a.UserRegistered,w)}}]);